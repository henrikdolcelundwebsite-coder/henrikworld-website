<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login - Henrik World</title>
<link rel="icon" type="image/png" href="favicon.png" />
<style>
  body {
    font-family: monospace;
    background-color: #fdfdfd;
    color: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .login-container {
    background-color: white;
    border: 1px solid #eee;
    padding: 30px 25px;
    border-radius: 12px;
    width: 320px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }

  h2 {
    margin-bottom: 20px;
    font-size: 24px;
    color: #222;
  }

  input {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
    font-family: monospace;
    transition: border 0.2s, box-shadow 0.2s;
  }

  input:focus {
    border-color: #888;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
    outline: none;
  }

  button {
    width: 100%;
    padding: 10px;
    font-size: 15px;
    font-family: monospace;
    cursor: pointer;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: white;
    transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
  }

  button:hover {
    background-color: #f5f5f5;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  }

  .signup-link {
    width: 100%;
    text-align: center;
    margin-top: 12px;
    font-size: 14px;
    color: white;
    background-color: #444;
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s;
  }

  .signup-link:hover {
    background-color: #555;
    transform: translateY(-1px);
  }

  .terms-link {
    width: 100%;
    text-align: center;
    margin-top: 12px;
    font-size: 12px;
    color: #0077cc;
    cursor: pointer;
    text-decoration: underline;
  }

  /* Modal styling */
  .modal {
    display: none;
    position: fixed;
    z-index: 999;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background-color: white;
    padding: 20px 25px;
    border-radius: 12px;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.5;
  }

  .close-btn {
    margin-top: 15px;
    padding: 8px 16px;
    cursor: pointer;
    border: 1px solid #ccc;
    background-color: #fff;
    border-radius: 8px;
    font-family: monospace;
  }

  .close-btn:hover {
    background-color: #f5f5f5;
  }
</style>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
  import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAQnIe1Z-CMgyYOhKmfKVbLSall-R7frws",
    authDomain: "henrikworldonline-a726f.firebaseapp.com",
    projectId: "henrikworldonline-a726f",
    storageBucket: "henrikworldonline-a726f.firebasestorage.app",
    messagingSenderId: "1060990020059",
    appId: "1:1060990020059:web:35e9816d249cd32d97dffe",
    measurementId: "G-VQNK4YN1C5"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loginUser() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!username || !password) {
      alert("Please enter both username and password.");
      return;
    }

    if (username === "Admin" && password === "Hen20111*") {
      localStorage.setItem("user", JSON.stringify({ username, password }));
      window.location.href = "admin.html";
      return;
    }

    try {
      const q = query(
        collection(db, "accounts"),
        where("username", "==", username),
        where("password", "==", password)
      );
      const snapshot = await getDocs(q);

      if (!snapshot.empty) {
        localStorage.setItem("user", JSON.stringify({ username, password }));
        window.location.href = "index.html";
      } else {
        alert("Invalid username or password.");
      }
    } catch (error) {
      console.error("Error logging in:", error);
      alert("Login failed.");
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    document.getElementById("loginBtn").addEventListener("click", loginUser);
    document.getElementById("password").addEventListener("keypress", (e) => {
      if (e.key === "Enter") loginUser();
    });
    document.getElementById("requestAccount").addEventListener("click", () => {
      window.location.href = "request.html";
    });

    // Terms modal
    const modal = document.getElementById("termsModal");
    document.getElementById("termsLink").addEventListener("click", () => {
      modal.style.display = "flex";
    });
    document.getElementById("closeTerms").addEventListener("click", () => {
      modal.style.display = "none";
    });
    window.addEventListener("click", (e) => {
      if (e.target === modal) modal.style.display = "none";
    });
  });
</script>
</head>
<body>
  <div class="login-container">
    <h2>Henrik World <span style="font-size:14px; font-weight:normal; color:#888;">v4.2</span></h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <div id="requestAccount" class="signup-link">Request an account</div>
    <div id="termsLink" class="terms-link">Terms & Conditions</div>
  </div>

  <!-- Terms Modal -->
  <div id="termsModal" class="modal">
    <div class="modal-content">
      <h3>Terms & Conditions - Henrik World</h3>
      <p>
        Welcome to Henrik World. This website is a personal project created by Henrik. All content, including images and media, has been shared with explicit consent from the individuals depicted. By using this website, you acknowledge that you understand this is a personal project and that all images were provided voluntarily by the participants.
      </p>
      <p>
        The content provided here is for personal, educational, and non-commercial purposes. Henrik cannot be held responsible for any unintended misuse of this website.
      </p>
      <p>
        Users are expected to behave responsibly. You may not upload or share content that violates applicable laws, infringes on intellectual property rights, or harms others.
      </p>
      <p>
        By logging in and using Henrik World, you agree to these terms. The website owner reserves the right to modify these terms at any time.
      </p>
      <button id="closeTerms" class="close-btn">Close</button>
    </div>
  </div>
</body>
</html>
