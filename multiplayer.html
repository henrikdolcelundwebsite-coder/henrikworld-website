<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiplayer Game</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDmFdbny6w6noCga2YU_sVQvvoAEK-_3vY",
  authDomain: "onlinewebsite-e55c8.firebaseapp.com",
  projectId: "onlinewebsite-e55c8",
  storageBucket: "onlinewebsite-e55c8.appspot.com",
  messagingSenderId: "153855517055",
  appId: "1:153855517055:web:eee5c6739bfa16ca78fa4a",
  measurementId: "G-6WK0BFJ0DS"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const urlParams = new URLSearchParams(window.location.search);
const docId = urlParams.get("docId");
const nickname = urlParams.get("nickname");
const gameName = urlParams.get("game");

document.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("gameInfo").textContent=`Game: ${gameName}`;
  document.getElementById("playerNickname").textContent=`Your Nickname: ${nickname}`;

  const gameDocRef = doc(db,"games",docId);

  onSnapshot(gameDocRef,(docSnap)=>{
    if(docSnap.exists()){
      const data = docSnap.data();
      const players = data.players || [];
      document.getElementById("playersList").innerHTML = "Players in Lobby:<br>"+players.join("<br>");
    }
  });
});
</script>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:20px; background-color:#f5f5f5; }
#gameInfo, #playerNickname { font-size:1.2rem; margin-bottom:10px; }
#playersList { margin-top:15px; font-size:1.1rem; }
</style>
</head>
<body>
<div id="gameInfo"></div>
<div id="playerNickname"></div>
<div id="playersList">Players in Lobby:</div>
<!-- Future chat/game area here -->
</body>
</html>
